
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Следење на контакти &#8212; Имунитет на стадо</title>
    
  <link rel="stylesheet" href="../_static/css/index.f658d18f9b420779cfdf24aa0a7e2d77.css">

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      
  <link rel="stylesheet"
    href="../_static/vendor/open-sans_all/1.44.1/index.css">
  <link rel="stylesheet"
    href="../_static/vendor/lato_latin-ext/1.44.1/index.css">

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sphinx-book-theme.40e2e510f6b7d1648584402491bb10fe.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../_static/js/index.d3f166471bb80abb5163.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/togglebutton.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../_static/sphinx-book-theme.d31b09fe5c1d09cb49b26a786de4a05d.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe,.cell"
        const thebe_selector_input = "pre,.cell_input div.highlight"
        const thebe_selector_output = ".output,.cell_output"
    </script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="shortcut icon" href="../_static/virus.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Алтернативна Power-law мрежа" href="5_3_power-law.html" />
    <link rel="prev" title="Ширење на вируси на ER мрежи" href="5_1_er-networks.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />



  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
<a class="navbar-brand text-wrap" href="../index.html">
  
  <img src="../_static/virus.png" class="logo" alt="logo">
  
  
  <h1 class="site-logo" id="site-title">Имунитет на стадо</h1>
  
</a>
</div><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../intro.html">
   Вовед
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Кодирање на SIR
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../01/1_modeling.html">
   Моделирање на заразна болест
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../01/1_1_model_math.html">
   Ширење на заразна болест
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../02/2_equations.html">
   SIR модел
  </a>
 </li>
 <li class="toctree-l1 collapsible-parent">
  <a class="reference internal" href="../02/2_2_1_scenario.html">
   Програмирање на модел
  </a>
  <ul class="collapse-ul">
   <li class="toctree-l2">
    <a class="reference internal" href="../02/2_2_2_D.html">
     Интерактивен график 1
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/2_2_3_gamma.html">
     Интерактивен график 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/2_2_4_beta.html">
     Интерактивен график 3
    </a>
   </li>
  </ul>
  <i class="fas fa-chevron-down">
  </i>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Можни проширувања на SIR
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../03/3_states.html">
   Транзиции на состојби
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03/3_1.html">
   SEIR модел
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../03/3_2.html">
   SEIRD модел
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Временски зависни променливи
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../04/4_main.html">
   Листа параметри
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/4_1_quarantine.html">
   Воведување карантин
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/4_2_r0.html">
   Временски зависно R0
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../04/4_3_age.html">
   Временски зависна смрттна стапка
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Erdős–Rényi мрежи
 </span>
</p>
<ul class="current nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="5_networkModels.html">
   Мрежи vs. равенки
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_1_er-networks.html">
   Ширење на вируси на ER мрежи
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Следење на контакти
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_3_power-law.html">
   Алтернативна Power-law мрежа
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Имунитет на стадо
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../06/6_herd-explained.html">
   Што е имунитет на стадо?
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06/6_1_herd-immunity.html">
   Ширење на повторувачки епидемии
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06/6_2_vaccines.html">
   Моделирање на сценарија со вакцинација
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../06/6_3_distance.html">
   Моделирање на физичко дистанцирање
  </a>
 </li>
</ul>
<p class="caption collapsible-parent">
 <span class="caption-text">
  Дополнителни ресурси
 </span>
</p>
<ul class="nav sidenav_l1">
 <li class="toctree-l1">
  <a class="reference internal" href="../bibs.html">
   Референци
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../intresting.html">
   Интересни статии, видеа
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference external" href="https://github.com/zelenelez/book_test">
   GitHub repository
   <i class="fas fa-external-link-alt">
   </i>
  </a>
 </li>
</ul>

</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="row topbar fixed-top container-xl">
    <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show">
    </div>
    <div class="col pl-2 topbar-main">
        
        <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
            data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
            aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
            title="Toggle navigation" data-toggle="tooltip" data-placement="left">
            <i class="fas fa-bars"></i>
            <i class="fas fa-arrow-left"></i>
            <i class="fas fa-arrow-up"></i>
        </button>
        
        
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../_sources/05/5_2_contact-tracing.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

        <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/zelenelez/book_test"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/zelenelez/book_test/issues/new?title=Issue%20on%20page%20%2F05/5_2_contact-tracing.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/zelenelez/book_test/edit/main/05/5_2_contact-tracing.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>


        <!-- Full screen (wrap in <a> to have style consistency -->
        <a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
                data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
                title="Fullscreen mode"><i
                    class="fas fa-expand"></i></button></a>

        <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/zelenelez/book_test/main?urlpath=lab/tree/05/5_2_contact-tracing.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        <a class="colab-button" href="https://colab.research.google.com/drive/1vq_Ll-xAgFfW-kkDin5WUucNtY09HUka#scrollTo=1dE2kHUFW7ju/github/zelenelez/book_test/blob/main/05/5_2_contact-tracing.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        <button type="button" class="btn btn-secondary topbarbtn"
            onclick="initThebeSBT()" title="Launch Thebe" data-toggle="tooltip" data-placement="left"><i
                class="fas fa-play"></i><span style="margin-left: .4em;">Live Code</span></button>
        
    </div>
</div>

    </div>

    <!-- Table of contents -->
    <div class="d-none d-md-block col-md-2 bd-toc show">
        
        <div class="tocsection onthispage pt-5 pb-3">
            <i class="fas fa-list"></i> Contents
        </div>
        <nav id="bd-toc-nav">
            <ul class="nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id2">
   Прогресија на епидемија
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#id3">
   Дрва на контакти
  </a>
 </li>
</ul>

        </nav>
        
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="id1">
<h1>Следење на контакти<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>Сега да се свртиме кон подетален преглед на начинот на ширење на епидемијата, а особено на прашањето кој кого инфицира. Работењето на оваа тематика е предмет на <strong>следење на контакт (contact tracing)</strong>, што е процес на утврдување на историјата на инфекцијата, додека болеста поминува низ популацијата. Во инфекција со SIR, ова се сведува на заклучок на моделот на заразени лица во текот на болеста.</p>
<p>Следењето на контакти се сведува на:</p>
<ol class="simple">
<li><p>Давање податоци: колку луѓе биле заразени во популацијата? колку не биле заразени иако биле во контакт со заразено лице? и така натаму.</p></li>
<li><p>Овозможување третман на заразени лица, евентуално пред тие да бидат симптоматски.</p></li>
<li><p>Овозможување на распоредување на контрамерки за да се намали ширењето на болеста.</p></li>
</ol>
<p>Во вистинска епидемија, аспектот за собирање податоци е од витално значење, бидејќи честопати сега ќе знаеме колку е нов болест е заразна. Аспектот на третман е исто така од витално значење за засегнатите лица, бидејќи раниот третман е често поефикасен. И за многу болести ќе има ефективни контрамерки како што е <em>карантин</em> што може да се наметне за да се намали ширењето на болеста уште повеќе. (Треба навистина да сметаме дека третманот е противмерка на ниво на популација, бидејќи лекуваните лица веројатно ќе ја шират болеста помалку од нелекуваните.)</p>
<p>Сепак, пронаоѓањето контакти во вистинска епидемија е макотрпен процес. Треба да ги идентификуваме заразените лица, или со нивно тестирање или со набудување на нивните симптоми, доколку тие се доволно различни за да се овозможи конечна идентификација. Потоа треба да ги идентификуваме сите со кои биле во контакт (нивната контактна мрежа) и да ги тестираме (или да ги набудуваме) за да утврдиме дали се заразени - а потоа да го повториме процесот со нивната контактна мрежа и така натаму.</p>
<p>За среќа, во симулирана епидемија, сите информации што ни се потребни се директно достапни. Ние ја знаеме мрежата за контакти <strong>априори (apriori)</strong> и можеме да ја инструментираме нашата симулација за да утврдиме начини на кои биле заразени поединци. Потоа можеме да го користиме овој инструментиран модел како основа за проучување на динамиката на болеста, стратегиите за третман и другите противмерки.</p>
<div class="section" id="id2">
<h2>Прогресија на епидемија<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Повеќето заболувања кои се шират преку контакт споделуваат извонреден имот: ако имате болест, некој ви ја дал: точно една личност. Наспроти поимот во поранешните времиња дека сите болести резултираат од „лош воздух“, во многу случаи патогените микроорганизми поминуваат од една на друга личност со прилично директен контакт. Секој контакт нуди можност за инфекција од една на друга личност.</p>
<p>Ова е поедноставување, се разбира. Некои болести се пренесуваат преку воздухот или оставаат долготрајни траги на мебелот или предметите од кои може да се подигнат. Ако многу заразени луѓе се движат низ истиот простор, тие го зголемуваат „товарот“ на патогени во просторот и ја прават инфекцијата поверојатна - и исто така маскираат кој е тој што всушност го направил инфицирањето. Но, за сите видови на инфекции што ги разгледуваме во моментов, претпоставуваме дека тие пренесуваат од личност до личност.</p>
<p>Како изгледа, тогаш, ширењето на болеста низ популацијата?</p>
<p>Ајде да поедноставиме малку повеќе и да претпоставиме дека имаме единствено заразено лице во целосно подложна популација. Како се шири инфекцијата? Ајде да ја пронајдеме инфекцијата како што напредува. За да го прикажеме ова малку ќе треба да го малку “hardcodе”-ираме за да го направиме механизмот поексплицитен.</p>
<p>Ова може да го споредме со описот на SIR од претходните примери.</p>
<p>Прво создаваме мала мрежа за ER и ја „засадуваме“ со единствено заразено лице, кое го чуваме во самата мрежа како атрибут. Потоа чекориме низ времето и на секој чекор ги разгледуваме соседите на секој заразен јазол. Ако се подложни, ги заразуваме со одредена веројатност и - доколку се заразат - ја запишуваме нивната инфекција за следниот временски запис. Ние исто така го обележуваме работ што го мина инфекцијата.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">stepEpidemic</span><span class="p">(</span><span class="n">g</span><span class="p">):</span>
    <span class="c1"># Следење на прогресот преку време </span>
    <span class="n">inf</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># Екстракција на сите инфицирани јазли </span>
    <span class="n">infecteds</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">nodes</span>
                 <span class="k">if</span> <span class="s1">&#39;infected&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()]</span>

    <span class="c1"># Прогресија на епидемијата</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">infecteds</span><span class="p">:</span>
        <span class="n">infs</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="s1">&#39;infected&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="c1"># зарази го секој поддлежен јазол</span>
            <span class="c1"># со веројатност pInfect (beta)</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">neighbors</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
                <span class="c1"># игнорирај ги сите веќе инфрицирани соседи </span>
                <span class="k">if</span> <span class="s1">&#39;infected&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="c1"># одлучи дали ќе заразиш или не</span>
                    <span class="k">if</span> <span class="n">numpy</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;</span> <span class="n">pInfect</span><span class="p">:</span>
                        <span class="c1"># заразуваме, запиши го ова и врската</span>
                        <span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">m</span><span class="p">][</span><span class="s1">&#39;infected&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">infs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                        <span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">][</span><span class="s1">&#39;occupied&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># мапирај ја инфекцијата </span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">infs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">inf</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">n</span><span class="p">,</span> <span class="n">infs</span><span class="p">))</span>

    <span class="c1"># врати мапа од кој кого заразил</span>
    <span class="k">return</span> <span class="n">inf</span>
</pre></div>
</div>
</div>
</div>
<p>Потоа можеме да го исцртуваме напредокот на инфекцијата преку мрежата како што одминува времето.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">drawEpidemic</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
    <span class="c1"># бои на јазли (зелени - поддлежни, црвени - заразени)</span>
    <span class="n">inf</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">nodes</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">)</span>
    <span class="n">ncs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;green&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">nodes</span><span class="p">)):</span>
        <span class="n">n</span> <span class="o">=</span> <span class="n">nodes</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;infected&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">ncs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
            <span class="n">inf</span> <span class="o">+=</span> <span class="mi">1</span>

    <span class="c1"># бои на врски (црни - незаразени, црвени - заразени)</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">)</span>
    <span class="n">ecs</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">edges</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">edges</span><span class="p">)):</span>
        <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span> <span class="o">=</span> <span class="n">edges</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">if</span> <span class="s1">&#39;occupied&#39;</span> <span class="ow">in</span> <span class="n">g</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">ecs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>

    <span class="c1"># цртај дрво на контакти</span>
    <span class="n">networkx</span><span class="o">.</span><span class="n">draw_circular</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                           <span class="n">node_color</span><span class="o">=</span><span class="n">ncs</span><span class="p">,</span> <span class="n">edge_color</span><span class="o">=</span><span class="n">ecs</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;$t = </span><span class="si">{t}</span><span class="s1">, [I] = </span><span class="si">{i}</span><span class="s1">$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">i</span><span class="o">=</span><span class="n">inf</span><span class="p">))</span>


<span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">16</span><span class="p">))</span>

<span class="c1"># Направи мала ЕР мрежа од 20 јазли</span>
<span class="n">N</span> <span class="o">=</span> <span class="mi">20</span>
<span class="n">pEdge</span> <span class="o">=</span> <span class="mf">0.2</span>
<span class="n">g</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">gnp_random_graph</span><span class="p">(</span><span class="n">N</span><span class="p">,</span> <span class="n">pEdge</span><span class="p">)</span>

<span class="c1"># Зарази го ПРВИОТ човек</span>
<span class="n">g</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;infected&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
<span class="n">infs</span> <span class="o">=</span> <span class="p">[[(</span><span class="kc">None</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">])]]</span>

<span class="n">pInfect</span> <span class="o">=</span> <span class="mf">0.19</span>

<span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="c1"># цртај ги заразените јазли и врските каде настанале</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
        <span class="n">drawEpidemic</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">ax</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span>

        <span class="c1"># шифтај за временски интервал</span>
        <span class="n">infs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stepEpidemic</span><span class="p">(</span><span class="n">g</span><span class="p">))</span>
        <span class="n">t</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># Исцртај и зачувај график</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Прогресија на епидемија ($p_{</span><span class="se">\\</span><span class="s1">mathit</span><span class="si">{infect}</span><span class="s1">} = &#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{i}</span><span class="s1">)$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">pInfect</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;images/3_1_Epidemic-progress.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5_2_contact-tracing_7_0.png" src="../_images/5_2_contact-tracing_7_0.png" />
</div>
</div>
<p>Постојат неколку работи што треба да се забележат овде. Прво, воочуваме колку брзо се зголемува бројот на заразени (означени <span class="math notranslate nohighlight">\([I]\)</span> на бројките) луѓе! Болеста брзо преминува од некаде до секаде, и само експлодира како што расте: стапката со која се шири се зголемува со зголемувањето на процентот на заразени луѓе, што е основната карактеристика на експоненцијалниот раст.</p>
<p>Второ, забележете колку неколку рабови беа пресечени. Ова има смисла, бидејќи може да има само еден раб на „пренос“ за секој јазол, што ќе биде само мал дел од вкупните јазли.</p>
</div>
<div class="section" id="id3">
<h2>Дрва на контакти<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Ова можеме да го направиме појасно со цртање на процесот малку поинаку - слично како дрва на одлука. (инспирација од <a class="reference external" href="https://www.ncbi.nlm.nih.gov/pmc/articles/PMC5607590/">статијата</a>. Наместо да ја цртаме мрежата како целина и да го покажеме начинот на ширење на инфекцијата, ние ќе се фокусираме само на заразените јазли и ќе покажеме како тие се однесуваат - со други зборови, кој на кого пренесува болест.</p>
<p>Започнуваме од <span class="math notranslate nohighlight">\(t = 0\)</span> со еден заразен јазол. Во следниот временски чекор ќе нацртаме втора линија на јазли што биле заразени од овој јазол, поврзани со него со рабови. Во следниот временски чекор ќе нацртаме трета линија на оние кои биле заразени од тие јазли и така натаму како што одминува времето.</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">drawContactTree</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">ct</span><span class="p">):</span>
    <span class="c1"># направи ја листата на зарази во мрежа</span>
    <span class="n">g</span> <span class="o">=</span> <span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">infs</span> <span class="ow">in</span> <span class="n">ct</span><span class="p">:</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">ms</span><span class="p">)</span> <span class="ow">in</span> <span class="n">infs</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">m</span> <span class="ow">in</span> <span class="n">ms</span><span class="p">:</span>
                <span class="n">g</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">n</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">g</span><span class="o">.</span><span class="n">add_edge</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">m</span><span class="p">)</span>

    <span class="c1"># пресметај ги сите слоеви во дрвото и бројот на </span>
    <span class="c1"># зарази за секоја индивидуа</span>
    <span class="n">secondaries</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">ns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="p">[</span><span class="n">ns</span><span class="p">]</span>
    <span class="k">while</span> <span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">ns</span><span class="p">:</span>
            <span class="n">gs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">g</span><span class="o">.</span><span class="n">neighbors</span><span class="p">(</span><span class="n">n</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">gs</span> <span class="o">-=</span> <span class="nb">set</span><span class="p">(</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
            <span class="n">layer</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">gs</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">gs</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">secondaries</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">gs</span><span class="p">)</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="p">[</span><span class="n">n</span> <span class="k">for</span> <span class="n">cs</span> <span class="ow">in</span> <span class="n">layer</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">cs</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ns</span><span class="p">)</span>

    <span class="c1"># пресметај локации</span>
    <span class="n">pos</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">dy</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">-</span> <span class="n">dy</span> <span class="o">/</span> <span class="mi">2</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="n">dx</span> <span class="o">=</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">dx</span>
        <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">layer</span><span class="p">:</span>
            <span class="n">pos</span><span class="p">[</span><span class="n">n</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
            <span class="n">x</span> <span class="o">+=</span> <span class="n">dx</span>
        <span class="n">y</span> <span class="o">-=</span> <span class="n">dy</span>

    <span class="c1"># пресметај го R во дадено време t</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">secondaries</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">Rt</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">secondaries</span><span class="o">.</span><span class="n">values</span><span class="p">())</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">secondaries</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">Rt</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># исцртај го дрвото</span>
    <span class="n">networkx</span><span class="o">.</span><span class="n">draw_networkx</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">pos</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span>
                           <span class="n">node_color</span><span class="o">=</span><span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">with_labels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">])</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">axis</span><span class="p">(</span><span class="s1">&#39;off&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;$t = </span><span class="si">{t}</span><span class="s1">, R = </span><span class="si">{rt:.2f}</span><span class="s1">$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">t</span><span class="o">=</span><span class="n">t</span><span class="p">,</span> <span class="n">rt</span><span class="o">=</span><span class="n">Rt</span><span class="p">))</span>


<span class="p">(</span><span class="n">fig</span><span class="p">,</span> <span class="n">axs</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">9</span><span class="p">))</span>

<span class="n">t</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
        <span class="n">ax</span> <span class="o">=</span> <span class="n">axs</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="n">infs</span><span class="p">[:(</span><span class="n">t</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">drawContactTree</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">layers</span><span class="p">)</span>
        <span class="n">t</span> <span class="o">+=</span> <span class="mi">1</span>

<span class="c1"># прикажи и зачувај фигура</span>
<span class="n">plt</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Прогресија на епидемија ($p_{</span><span class="se">\\</span><span class="s1">mathit</span><span class="si">{infect}</span><span class="s1">} = &#39;</span> <span class="o">+</span> <span class="s1">&#39;</span><span class="si">{i}</span><span class="s1">)$&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="n">pInfect</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;images/3_2_Contact-tree.png&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/5_2_contact-tracing_11_0.png" src="../_images/5_2_contact-tracing_11_0.png" />
</div>
</div>
<p>Оваа слоевита структура е <strong>контактно дрво (contact tree)</strong>. Највисок јазол е <strong>нулти пациент (patient zero)</strong>, првото лице заразено во епидемијата. Оние што се наоѓаат во следниот слој надолу се првиот пакет секундарни случаи, лицата заразени од нулиот пациент. И така натаму. Забележете дека бидејќи еден јазол останува заразен (во овој многу едноставен модел) тој може да продолжи да ги инфицира јазлите, така што слоевите може да растат со текот на времето, бидејќи се појавуваат секундарни случаи од секој заразен.</p>
<p>Компјутерските научници го нарекуваат горниот јазол на дрвото како <strong>корен (root)</strong> и секогаш го цртаат коренот на врвот на дијаграмот на дрвото.</p>
<p>Исто интересно е што забележав е дека на горниот дијаграм <span class="math notranslate nohighlight">\(R\)</span> (spreading factor) се намалува со текот на времето.</p>
<p>Зошто е тоа така?</p>
<p>Тоа е затоа што секоја индивидуа може да се зарази само еднаш и, откако ќе се зарази, не може да се зарази повторно. Подоцна заразените лица имаат поголема веројатност да имаат соседи кои се веќе заразени, и затоа имаат помалку можност да ја пренесат болеста на нови луѓе. Овој феномен на „полнење“ на мрежата со заразени лица - а подоцна и во SIR, со оние што биле отстранети - е причината зошто епидемиите природно изумираат без нужно да ја инфицираат целата популација. Тоа е исто така основа за вакцинација, што е тема на која планирам да дадам примери.</p>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "zelenelez/book_test",
            ref: "main",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./05"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        </div>
    </div>
    
    
    <div class='prev-next-bottom'>
        
    <a class='left-prev' id="prev-link" href="5_1_er-networks.html" title="previous page">Ширење на вируси на ER мрежи</a>
    <a class='right-next' id="next-link" href="5_3_power-law.html" title="next page">Алтернативна Power-law мрежа</a>

    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Kiril Zelenkovski<br/>
        
            &copy; Copyright 2021.<br/>
          <div class="extra_footer">
            Моделирање и симулација [ФИНКИ]
          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>

    
  <script src="../_static/js/index.d3f166471bb80abb5163.js"></script>


    
  </body>
</html>